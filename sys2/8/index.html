
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../7/">
      
      
        <link rel="next" href="../../interpret/1/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Chapter 8 CPU Scheduling - sodasugar的笔记本</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#chapter-8-cpu-scheduling" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="sodasugar的笔记本" class="md-header__button md-logo" aria-label="sodasugar的笔记本" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            sodasugar的笔记本
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Chapter 8 CPU Scheduling
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="sodasugar的笔记本" class="md-nav__button md-logo" aria-label="sodasugar的笔记本" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    sodasugar的笔记本
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    首页
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    通识课
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            通识课
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    大物乙Ⅱ
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            大物乙Ⅱ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../physics2/%E7%89%A9%E7%90%86%E5%AD%A6%E5%8D%95%E4%BD%8D%E6%8D%A2%E7%AE%97/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    物理学单位换算
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../physics2/Chapter1_%E9%9D%99%E7%94%B5%E5%9C%BA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 1 静电场
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../physics2/Chapter2_%E9%9D%99%E7%94%B5%E5%9C%BA%E4%B8%AD%E7%9A%84%E5%AF%BC%E4%BD%93%E5%92%8C%E7%94%B5%E4%BB%8B%E8%B4%A8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 2 静电场中的导体和电介质
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../physics2/Chapter3_%E7%94%B5%E6%B5%81%E5%92%8C%E7%A3%81%E5%9C%BA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 3 电流和磁场
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../physics2/Chapter4_%E7%89%A9%E8%B4%A8%E4%B8%AD%E7%9A%84%E7%A3%81%E5%9C%BA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 4 物质中的磁场
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../physics2/Chapter5_%E7%94%B5%E7%A3%81%E6%84%9F%E5%BA%94/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 5 电磁感应
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../physics2/Chapter6_%E9%BA%A6%E5%85%8B%E6%96%AF%E9%9F%A6%E6%96%B9%E7%A8%8B%E4%B8%8E%E7%94%B5%E7%A3%81%E6%B3%A2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 6 麦克斯韦方程与电磁波
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../physics2/Chapter7_%E5%85%89%E7%9A%84%E5%B9%B2%E6%B6%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 7 光的干涉
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../physics2/Chapter8_%E5%85%89%E7%9A%84%E8%A1%8D%E5%B0%84/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 8 光的衍射
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../physics2/Chapter9_%E5%85%89%E7%9A%84%E5%81%8F%E6%8C%AF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 9 光的偏振
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../physics2/10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 10 光的量子论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../physics2/11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 11 玻尔的原子模型
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../physics2/12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 12 量子力学初步
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../physics2/midterm_review/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    期中小结
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    专业课
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            专业课
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    数据安全与密码学基础
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            数据安全与密码学基础
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cryptography/resource/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    资源索引
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cryptography/1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 1 概论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cryptography/2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 2 完善保密加密
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cryptography/3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 3 对称密钥加密以及伪随机性
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cryptography/4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 4 消息鉴别码
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cryptography/5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 5 哈希函数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cryptography/midterm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    期中考试卷
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    高级数据结构与算法分析
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            高级数据结构与算法分析
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/resource/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    资源索引
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2_2" id="__nav_3_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    题目集
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_2">
            <span class="md-nav__icon md-icon"></span>
            题目集
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Problem_Set/01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AVL 树
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Problem_Set/02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Splay 树
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Problem_Set/03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    摊还分析
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Problem_Set/04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    红黑树
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Problem_Set/05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    B+ 树
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Problem_Set/06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    倒排索引
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Problem_Set/07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    左偏堆
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Problem_Set/08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    斜堆
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Problem_Set/09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    二项队列
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Problem_Set/10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    回溯
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Problem_Set/11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    分治法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Problem_Set/12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    动态规划
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Problem_Set/13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    贪心算法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Problem_Set/14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P/NP 问题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Problem_Set/15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    近似算法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Problem_Set/16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    局部搜索
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Problem_Set/17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    随机算法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Problem_Set/18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    并行算法
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/cheatsheet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    期中考 cheat sheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/midterm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    期中考试
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    计算机系统Ⅱ
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            计算机系统Ⅱ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 1 ISA Review
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 2 Design of Pipelining
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 3 Hazard of Pipelining
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 4 Software-Hardware Interface
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 5 Intro&Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 6 Structures
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 7 Processes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Chapter 8 CPU Scheduling
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Chapter 8 CPU Scheduling
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1 基本概念
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1 基本概念">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-1-cpu" class="md-nav__link">
    <span class="md-ellipsis">
      1. 1 CPU 调度
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-2-cpu-io" class="md-nav__link">
    <span class="md-ellipsis">
      1. 2 CPU 突发和 I/O 突发
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-3" class="md-nav__link">
    <span class="md-ellipsis">
      1. 3 抢占式与非抢占式调度
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-4" class="md-nav__link">
    <span class="md-ellipsis">
      1. 4 进程队列管理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2 调度算法
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 调度算法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2-1-fcfs-first-come-first-served-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      2. 1 先来先服务调度（FCFS, First-Come, First-Served Scheduling）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-2-sjf-shortest-job-first-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      2. 2 短作业优先调度（SJF, Shortest-Job-First Scheduling）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-3-rr-round-robin-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      2. 3 时间片轮转调度（RR, Round-Robin Scheduling）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-4-priority-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      2. 4 优先级调度（Priority Scheduling）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-5-multilevel-queue-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      2. 5 多级队列调度（Multilevel Queue Scheduling）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-6-multilevel-feedback-queue-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      2. 6 多级反馈队列调度（Multilevel Feedback Queue Scheduling）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3 调度机制
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 调度机制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3-1-thread-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      3. 1 线程调度（Thread Scheduling）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-2-multiple-processor-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      3. 2 多处理器调度（Multiple-Processor Scheduling）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-3-real-time-cpu-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      3. 3 实时调度（Real-Time CPU Scheduling）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-os" class="md-nav__link">
    <span class="md-ellipsis">
      4 主流 OS 调度实现
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4 主流 OS 调度实现">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#4-1-win-xp-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      4. 1 Win XP Scheduling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-2-linux-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      4. 2 Linux Scheduling
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    选修课
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            选修课
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    英语口译
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            英语口译
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interpret/1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 Ceremonial Speech
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interpret/2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 Tourism
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interpret/3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 Culture and Education
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interpret/text/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    课堂文本
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1 基本概念
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1 基本概念">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-1-cpu" class="md-nav__link">
    <span class="md-ellipsis">
      1. 1 CPU 调度
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-2-cpu-io" class="md-nav__link">
    <span class="md-ellipsis">
      1. 2 CPU 突发和 I/O 突发
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-3" class="md-nav__link">
    <span class="md-ellipsis">
      1. 3 抢占式与非抢占式调度
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-4" class="md-nav__link">
    <span class="md-ellipsis">
      1. 4 进程队列管理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2 调度算法
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 调度算法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2-1-fcfs-first-come-first-served-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      2. 1 先来先服务调度（FCFS, First-Come, First-Served Scheduling）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-2-sjf-shortest-job-first-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      2. 2 短作业优先调度（SJF, Shortest-Job-First Scheduling）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-3-rr-round-robin-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      2. 3 时间片轮转调度（RR, Round-Robin Scheduling）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-4-priority-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      2. 4 优先级调度（Priority Scheduling）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-5-multilevel-queue-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      2. 5 多级队列调度（Multilevel Queue Scheduling）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-6-multilevel-feedback-queue-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      2. 6 多级反馈队列调度（Multilevel Feedback Queue Scheduling）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3 调度机制
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 调度机制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3-1-thread-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      3. 1 线程调度（Thread Scheduling）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-2-multiple-processor-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      3. 2 多处理器调度（Multiple-Processor Scheduling）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-3-real-time-cpu-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      3. 3 实时调度（Real-Time CPU Scheduling）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-os" class="md-nav__link">
    <span class="md-ellipsis">
      4 主流 OS 调度实现
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4 主流 OS 调度实现">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#4-1-win-xp-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      4. 1 Win XP Scheduling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-2-linux-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      4. 2 Linux Scheduling
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="chapter-8-cpu-scheduling">Chapter 8 CPU Scheduling<a class="headerlink" href="#chapter-8-cpu-scheduling" title="Permanent link">&para;</a></h1>
<h2 id="1">1 基本概念<a class="headerlink" href="#1" title="Permanent link">&para;</a></h2>
<h3 id="1-1-cpu">1. 1 CPU 调度<a class="headerlink" href="#1-1-cpu" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>CPU 调度</strong>是操作系统决定就绪进程/线程何时运行、运行多久的决策过程，在多道程序环境中不可或缺，直接影响系统性能与生产力，其目标是最大化 CPU 利用率，避免 CPU 空闲</li>
</ul>
<details class="question">
<summary>CPU 调度发生的时机？</summary>
<p><img src="/sys2/images/image8-3.png" style="display: block; width: 60%; margin: 0 auto;" /></p>
<ul>
<li>调度操作发生在 CPU 处于内核态的时候，触发原因是硬件中断或软件中断（如系统调用）</li>
</ul>
</details>
<ul>
<li><strong>策略（Policy）</strong>：指进程调度的<strong>具体方案</strong>，规定了进程的调度规则与优先级判定逻辑</li>
<li><strong>机制（Mechanism）</strong>：即<strong>调度器</strong>，是操作系统实现进程调度的核心组件，负责在多个进程之间进行切换。<ul>
<li>调度器依赖<strong>上下文切换机制</strong>完成进程的切换操作</li>
<li>对于<strong>分时系统</strong>，调度器的核心要求是<strong>调度延迟低、运行速度快</strong></li>
</ul>
</li>
</ul>
<h3 id="1-2-cpu-io">1. 2 CPU 突发和 I/O 突发<a class="headerlink" href="#1-2-cpu-io" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>进程会交替进行 <strong>CPU 突发</strong>（执行指令）和 <strong>I/O 突发</strong>（等待设备），<strong>以 CPU 突发开始和结束</strong>，据此可将进程分为以下两类：</p>
<ul>
<li><strong>I/O密集型进程（I/O-bound process）</strong>：频繁等待 I/O，CPU 突发短，如 <code>/bin/cp</code>（复制命令）</li>
<li><strong>CPU密集型进程（CPU-bound process）</strong>：主要占用 CPU，I/O 突发极短或无，如图像增强操作</li>
<li>进程类型的多样性增加了 CPU 调度的复杂度</li>
</ul>
<p><img src="/sys2/images/image8-1.png" style="display: block; width: 30%; margin: 0 auto;" /></p>
<div class="admonition tip">
<p class="admonition-title">CPU 突发时长的直方图</p>
<p><img src="/sys2/images/image8-2.png" style="display: block; width: 50%; margin: 0 auto;" /></p>
<ul>
<li>大部分 CPU 突发是短时长的（对应图中左侧峰值区域，频率很高）</li>
<li>只有少量 CPU 突发是较长时长的（对应图中右侧拖尾区域，频率很低）</li>
</ul>
</div>
</li>
</ul>
<h3 id="1-3">1. 3 抢占式与非抢占式调度<a class="headerlink" href="#1-3" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>抢占（Preemption）</strong>指的是强制暂停一个正在运行的进程的操作</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>非抢占式调度（Non-preemptive Scheduling）<br>/协作式调度（Cooperative Scheduling）</th>
<th>抢占式调度（Preemptive scheduling）</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>特点</strong></td>
<td>进程会一直占用 CPU，直到它主动释放（终止或等待 I/O）</td>
<td>可强制暂停运行中进程（如时间片到期）</td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">抢占式调度的优势和复杂性</p>
<ul>
<li><strong>优势</strong>：无需依赖进程主动释放 CPU，OS 保持对系统的控制权</li>
<li><strong>复杂性</strong>：会带来许多进程同步相关问题<ul>
<li>需考虑共享数据的访问（冲突）</li>
<li>需考虑内核态下的抢占操作</li>
<li>需考虑关键操作系统活动期间发生的中断</li>
</ul>
</li>
</ul>
</div>
<table>
<thead>
<tr>
<th></th>
<th>用户抢占（User preemption）</th>
<th>内核抢占（Kernel preemption）</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>特点</strong></td>
<td>从内核态返回用户态时触发（如系统调用、中断处理后）</td>
<td>内核态执行中触发（如中断处理退出、显式调用 <code>schedule()</code>、内核任务阻塞等）</td>
</tr>
</tbody>
</table>
<ul>
<li>用户抢占和内核抢占都发生在<strong>内核态</strong>中，区分依据是 <strong>CPU 接下来要返回的目标位置</strong></li>
</ul>
<table>
<thead>
<tr>
<th>序号</th>
<th>触发场景</th>
<th>对应调度类型</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong># 1</strong></td>
<td>运行状态 <span class="arithmatex">\(→\)</span> 等待状态（如等待 I/O）</td>
<td>非抢占式/抢占式均触发</td>
</tr>
<tr>
<td><strong># 2</strong></td>
<td>运行状态 <span class="arithmatex">\(→\)</span> 就绪状态（如发生中断时）</td>
<td>仅抢占式触发</td>
</tr>
<tr>
<td><strong># 3</strong></td>
<td>等待状态 <span class="arithmatex">\(→\)</span> 就绪状态（如 I/O 完成时）</td>
<td>仅抢占式触发</td>
</tr>
<tr>
<td><strong># 4</strong></td>
<td>运行状态 <span class="arithmatex">\(→\)</span> 终止状态</td>
<td>非抢占式/抢占式均触发</td>
</tr>
<tr>
<td><strong># 5</strong></td>
<td>新建<span class="arithmatex">\(→\)</span>就绪</td>
<td>仅抢占式触发</td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">调度时机分析</p>
<ul>
<li>
<p><strong># 1</strong> 和 <strong># 4</strong> 都是进程主动释放 CPU，这是非抢占式调度的唯一调度时机</p>
</li>
<li>
<p><strong># 2</strong> 是系统强行打断当前进程，<strong># 3</strong> 是系统把 CPU 优先分配给新就绪的高优先级进程，这两种都是系统主动干预，对应抢占式调度，且需要计时器等硬件支持</p>
</li>
<li>
<p>如果进程在操作共享资源时突然被系统抢占，可能导致数据错乱，因此需要<strong>同步原语（Synchronization primitives）</strong>保护共享资源</p>
</li>
</ul>
</div>
<h3 id="1-4">1. 4 进程队列管理<a class="headerlink" href="#1-4" title="Permanent link">&para;</a></h3>
<ul>
<li>内核通过队列管理进程，基于 PCB 链表实现<ul>
<li><strong>就绪队列（Ready Queue）</strong>：存储所有就绪状态的进程，Linux 中通过 <code>list_head</code> 结构体实现</li>
<li><strong>设备队列（Device Queues）</strong>：按设备分类，存储等待该设备的进程（如磁盘队列、终端队列）</li>
</ul>
</li>
</ul>
<div style="display: flex; justify-content: center; gap: 10px; width: 100%; flex-wrap: wrap;">
  <img src="/sys2/images/image8-4.png" style="width: 45%; height: auto; object-fit: contain;" />
  <img src="/sys2/images/image8-5.png" style="width: 45%; height: auto; object-fit: contain;" />
</div>

<ul>
<li>调度模块将 CPU 的控制权交给调度程序选中的进程，具体包括：切换上下文、切换到用户模式并跳转到用户程序中的对应位置以重启该程序</li>
<li><strong>调度延迟（Dispatch latency）</strong>：调度模块停止一个进程并启动另一个进程所需的时间</li>
</ul>
<p><img src="/sys2/images/image8-6.png" style="display: block; width: 30%; margin: 0 auto;" /></p>
<h2 id="2">2 调度算法<a class="headerlink" href="#2" title="Permanent link">&para;</a></h2>
<div class="admonition quote">
<p class="admonition-title">调度的目标</p>
<ul>
<li><strong>最大化 CPU 利用率</strong>：尽可能让 CPU 保持忙碌状态</li>
<li><strong>最大化吞吐量</strong>：单位时间内完成执行的进程数量</li>
<li><strong>最小化周转时间</strong>：执行某个特定进程所需的总时间</li>
<li><strong>最小化等待时间</strong>：进程在就绪队列中等待的时间长度</li>
<li><strong>最小化响应时间</strong>：从请求提交到产生首次响应的时间（适用于分时环境）</li>
</ul>
</div>
<h3 id="2-1-fcfs-first-come-first-served-scheduling">2. 1 先来先服务调度（FCFS, First-Come, First-Served Scheduling）<a class="headerlink" href="#2-1-fcfs-first-come-first-served-scheduling" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>原理</strong>：按进程到达顺序分配 CPU，<strong>非抢占式</strong>，实现最简单</li>
<li><strong>护航效应（Convoy Effect）</strong>：短进程跟随长进程会导致整体延迟</li>
</ul>
<div class="admonition example">
<p class="admonition-title">示例</p>
<table>
<thead>
<tr>
<th style="text-align: center;">进程</th>
<th style="text-align: center;">突发时间</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_1\)</span></td>
<td style="text-align: center;">24</td>
</tr>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_2\)</span></td>
<td style="text-align: center;">3</td>
</tr>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_3\)</span></td>
<td style="text-align: center;">3</td>
</tr>
</tbody>
</table>
<p>假设进程的到达顺序为 <span class="arithmatex">\(P_1\)</span>、<span class="arithmatex">\(P_2\)</span>、<span class="arithmatex">\(P_3\)</span>，则该调度对应的甘特图如下：</p>
<p><img src="/sys2/images/image8-7.png" style="display: block; width: 50%; margin: 0 auto;" /></p>
<p>平均等待时间 <span class="arithmatex">\(t_{\text{average_waiting}} = \frac{0+24+27}{3} = 17\)</span></p>
<p>假设进程<strong>同时到达</strong>，顺序为 <span class="arithmatex">\(P_2\)</span>、<span class="arithmatex">\(P_3\)</span>、<span class="arithmatex">\(P_1\)</span>，则该调度的对应甘特图如下：</p>
<p><img src="/sys2/images/image8-8.png" style="display: block; width: 50%; margin: 0 auto;" /></p>
<p>平均等待时间 <span class="arithmatex">\(t_{\text{average_waiting}} = \frac{6+0+3}{3} = 3\)</span></p>
</div>
<h3 id="2-2-sjf-shortest-job-first-scheduling">2. 2 短作业优先调度（SJF, Shortest-Job-First Scheduling）<a class="headerlink" href="#2-2-sjf-shortest-job-first-scheduling" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>原理</strong>：优先选择<strong>下次CPU突发时间最短</strong>的进程，分为非抢占式和抢占式</li>
</ul>
<div class="admonition example">
<p class="admonition-title">非抢占式调度示例</p>
<table>
<thead>
<tr>
<th style="text-align: center;">进程</th>
<th style="text-align: center;">到达时间</th>
<th style="text-align: center;">突发时间</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_1\)</span></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">10</td>
</tr>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_2\)</span></td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">6</td>
</tr>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_3\)</span></td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">7</td>
</tr>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_4\)</span></td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">2</td>
</tr>
</tbody>
</table>
<p>该调度的对应甘特图如下：</p>
<p><img src="/sys2/images/image8-9.png" style="display: block; width: 50%; margin: 0 auto;" /></p>
<p>平均等待时间 <span class="arithmatex">\(t_{\text{average_waiting}} = \frac{0+10+14+5}{4} = 7.25\)</span></p>
</div>
<div class="admonition example">
<p class="admonition-title">抢占式调度示例</p>
<ul>
<li><strong>最短剩余时间优先（SRTF, shortest-remaining-time-first）</strong></li>
</ul>
<table>
<thead>
<tr>
<th style="text-align: center;">进程</th>
<th style="text-align: center;">到达时间</th>
<th style="text-align: center;">突发时间</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_1\)</span></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">10</td>
</tr>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_2\)</span></td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">6</td>
</tr>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_3\)</span></td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">7</td>
</tr>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_4\)</span></td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">2</td>
</tr>
</tbody>
</table>
<p>该调度的对应甘特图如下：</p>
<p><img src="/sys2/images/image8-10.png" style="display: block; width: 50%; margin: 0 auto;" /></p>
<p>平均等待时间 <span class="arithmatex">\(t_{\text{average_waiting}} = \frac{15 + 2 + 6 + 0}{4} = 5.75\)</span></p>
</div>
<ul>
<li>短作业优先（SJF）在<strong>平均等待时间</strong>指标上被证明是<strong>最优</strong>的，也被称为<strong>最短剩余处理时间（SRPT, Shortest Remaining Processing 
Time）</strong>，其最优性不受抢占与否影响</li>
<li>核心问题在于无法预知下次 CPU 突发时间，实际中需通过历史数据预测</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">指数平均法预测 CPU 突发时长</p>
<ul>
<li>根据过去的数据预测未来，给近期的历史数据赋予比远期历史数据更高的权重</li>
</ul>
<div class="arithmatex">\[
\tau_{n+1} = \alpha t_n + (1 - \alpha)\tau_n
\]</div>
<div class="arithmatex">\[
\tau_{n+1} = \alpha t_n + (1-\alpha)\alpha t_{n-1} + \dots + (1-\alpha)^j \alpha t_{n-j} + \dots + (1-\alpha)^{n+1} \tau_0
\]</div>
<p>参数 <span class="arithmatex">\(\alpha\)</span> 的取值在 <span class="arithmatex">\(0\)</span> 到 <span class="arithmatex">\(1\)</span> 之间，<span class="arithmatex">\(0\)</span> 表示不关注最近的历史数据，<span class="arithmatex">\(1\)</span> 表示只关注最近的历史数据，<span class="arithmatex">\(0.5\)</span> 表示一种这种方案，实际用例如下：</p>
<p><img src="/sys2/images/image8-11.png" style="display: block; width: 50%; margin: 0 auto;" /></p>
</div>
<h3 id="2-3-rr-round-robin-scheduling">2. 3 时间片轮转调度（RR, Round-Robin Scheduling）<a class="headerlink" href="#2-3-rr-round-robin-scheduling" title="Permanent link">&para;</a></h3>
<ul>
<li>RR 调度是<strong>抢占式</strong>的，专为分时系统设计</li>
<li>定义时间片，进程运行不超过时间片（突发时间短于时间片则提前释放）</li>
<li>就绪队列采用<strong>先进先出（FIFO）</strong>机制，进程就绪后进入队尾</li>
</ul>
<div class="admonition example">
<p class="admonition-title">示例</p>
<table>
<thead>
<tr>
<th style="text-align: center;">进程</th>
<th style="text-align: center;">突发时长</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_1\)</span></td>
<td style="text-align: center;">24</td>
</tr>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_2\)</span></td>
<td style="text-align: center;">3</td>
</tr>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_3\)</span></td>
<td style="text-align: center;">3</td>
</tr>
</tbody>
</table>
<p>采用时间片 <span class="arithmatex">\(=4\)</span>，则对应的甘特图如下：</p>
<p><img src="/sys2/images/image8-12.png" style="display: block; width: 50%; margin: 0 auto;" /></p>
<p>平均等待时间 <span class="arithmatex">\(t_{\text{average_waiting}} = \frac{6 + 4 + 7}{3} = 5.67\)</span></p>
</div>
<ul>
<li>通常平均等待时间比短作业优先（SJF）<strong>差</strong>，但响应时间更<strong>好</strong>（不会出现饥饿现象）</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>响应性/交互性</th>
<th>上下文切换开销</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>短时间片</strong></td>
<td>优秀</td>
<td>极高</td>
<td>若调度器足够快，开销有望不会过高</td>
</tr>
<tr>
<td><strong>长时间片</strong></td>
<td>较差</td>
<td>极低</td>
<td>当时间片极长时，轮询（RR）调度会退化为先来先服务（FCFS）调度</td>
</tr>
</tbody>
</table>
<ul>
<li>实际场景中，CPU 花在切换上的时间占比非常低，常用时间片范围为 <span class="arithmatex">\(10 - 100 \, \text{ms}\)</span>，上下文切换时间约 <span class="arithmatex">\(10 \, \text{μs}\)</span></li>
</ul>
<h3 id="2-4-priority-scheduling">2. 4 优先级调度（Priority Scheduling）<a class="headerlink" href="#2-4-priority-scheduling" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>原理</strong>：为进程分配优先级（数值范围如 <span class="arithmatex">\(0-9\)</span>，无统一约定，低数值可能表示高/低优先级），优先调度高优先级进程</li>
<li>优先级分类：<ul>
<li>内部优先级：基于进程属性（如 SJF 中预测突发时间、打开文件数）</li>
<li>外部优先级：用户指定（如任务重要性）</li>
</ul>
</li>
<li>短作业优先（SJF）是优先级调度的特例，其优先级是下一次 CPU 突发时长预测值的倒数（即突发时长越短，优先级越高）</li>
</ul>
<div class="admonition example">
<p class="admonition-title">优先级调度示例</p>
<table>
<thead>
<tr>
<th style="text-align: center;">进程</th>
<th style="text-align: center;">突发时长</th>
<th style="text-align: center;">优先级</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_1\)</span></td>
<td style="text-align: center;">10</td>
<td style="text-align: center;">3</td>
</tr>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_2\)</span></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
</tr>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_3\)</span></td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">4</td>
</tr>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_4\)</span></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">5</td>
</tr>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_5\)</span></td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">2</td>
</tr>
</tbody>
</table>
<p>对应的甘特图如下：</p>
<p><img src="/sys2/images/image8-13.png" style="display: block; width: 50%; margin: 0 auto;" /></p>
<p>平均等待时间 <span class="arithmatex">\(t_{\text{average_waiting}} = \frac{6 + 0 + 16 + 18 + 1}{5} = 8.2\)</span></p>
</div>
<div class="admonition example">
<p class="admonition-title">结合轮询的优先级调度示例</p>
<ul>
<li>调度规则：运行优先级最高的进程，优先级相同的进程采用轮询调度</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align: center;">进程</th>
<th style="text-align: center;">突发时长</th>
<th style="text-align: center;">优先级</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_1\)</span></td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">3</td>
</tr>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_2\)</span></td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">2</td>
</tr>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_3\)</span></td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">2</td>
</tr>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_4\)</span></td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">1</td>
</tr>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(P_5\)</span></td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">3</td>
</tr>
</tbody>
</table>
<p>采用时间片 <span class="arithmatex">\(=2\)</span>，则对应的甘特图如下：</p>
<p><img src="/sys2/images/image8-14.png" style="display: block; width: 50%; margin: 0 auto;" /></p>
</div>
<ul>
<li>和短作业优先（SJF）一样，优先级调度可以是抢占式或非抢占式的</li>
<li><strong>饥饿问题（starvation）</strong>：低优先级进程可能永远被高优先级进程抢占</li>
<li>解决方案：<strong>优先级老化</strong>（随进程等待时间增加优先级）</li>
</ul>
<h3 id="2-5-multilevel-queue-scheduling">2. 5 多级队列调度（Multilevel Queue Scheduling）<a class="headerlink" href="#2-5-multilevel-queue-scheduling" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>原理</strong>：按进程类别（如优先级、类型）划分多个就绪队列，每个队列采用独立调度策略<ul>
<li><strong>队列内调度（Scheduling within queues）</strong>：每个队列有自己的调度策略，如如高优先级队列用 RR，低优先级队列用 FCFS</li>
<li><strong>队列间调度（Scheduling between the queues）</strong>：通常采用抢占式优先级调度（高优先级队列非空时低优先级队列无法运行），或采用队列间的时间分片（如 <span class="arithmatex">\(80\%\)</span> 的时间分配给队列 <span class="arithmatex">\(1\)</span>，<span class="arithmatex">\(20\%\)</span> 的时间分配给队列 <span class="arithmatex">\(2\)</span>）</li>
</ul>
</li>
</ul>
<p><img src="/sys2/images/image8-15.png" style="display: block; width: 50%; margin: 0 auto;" /></p>
<h3 id="2-6-multilevel-feedback-queue-scheduling">2. 6 多级反馈队列调度（Multilevel Feedback Queue Scheduling）<a class="headerlink" href="#2-6-multilevel-feedback-queue-scheduling" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>进程可在队列间迁移，动态调整优先级</strong></li>
</ul>
<div class="admonition example">
<p class="admonition-title">示例</p>
<p><img src="/sys2/images/image8-16.png" style="display: block; width: 50%; margin: 0 auto;" /></p>
<ul>
<li>新进程入最高优先级队列</li>
<li>未用完时间片的进程大概率是 I/O 密集型，留在原队列，确保它在少数需要 CPU 的场合下可以顺利获得 CPU 资源</li>
<li>用完时间片的进程大概率是 CPU 密集型，降级至低优先级队列，只有在非 CPU 密集型进程不需要 CPU 时才能获得运行机会</li>
<li>饥饿防护：低优先级队列中长时间等待的进程逐步升级优先级</li>
</ul>
</div>
<ul>
<li>该算法是<strong>目前最通用的 CPU 调度算法</strong>，同时具备极强的可配置性（队列的数量、每个队列各自采用的调度算法、队列之间的调度规则，以及进程在不同队列间的升级/降级方式）</li>
<li>该算法同时也是<strong>复杂度最高的调度算法</strong><ul>
<li>适配某一系统或工作负载的最优配置，往往无法直接套用于其他场景，且参数繁多的可配置系统看似潜力充足，但实际很难达到预期的效果</li>
<li>计算开销大，Linux 内核开发者需要借助技巧提升运行效率</li>
</ul>
</li>
</ul>
<details class="question">
<summary>What's a Good Scheduling Algorithm?</summary>
<ul>
<li><strong>理论分析</strong>：<ul>
<li>可用的分析/理论结论<strong>较少</strong></li>
<li>核心思路：选取两种调度算法和一个评估指标（如平均等待时间），对比其表现</li>
<li>仅极少数场景能证明算法最优（如短作业优先对平均等待时间最优）</li>
</ul>
</li>
<li><strong>模拟测试</strong>：<ul>
<li>测试方式：通过<strong>自动生成甘特图</strong>，覆盖上百万种场景</li>
<li>对比结果：统计算法在多数场景的表现</li>
</ul>
</li>
<li>实际实现（最终验证方案）：<ol>
<li>将算法 A、B 都部署到内核中（<strong>耗时较高</strong>）</li>
<li>针对同一基准工作负载，分别用两种算法运行 <span class="arithmatex">\(10\)</span> 小时</li>
<li>对比结果，以实际有效工作为标准</li>
</ol>
</li>
</ul>
</details>
<h2 id="3">3 调度机制<a class="headerlink" href="#3" title="Permanent link">&para;</a></h2>
<h3 id="3-1-thread-scheduling">3. 1 线程调度（Thread Scheduling）<a class="headerlink" href="#3-1-thread-scheduling" title="Permanent link">&para;</a></h3>
<ul>
<li>支持线程的系统中，调度对象是线程而非进程</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>进程竞争范围（PCS, process-contention scope）</th>
<th>系统竞争范围（SCS, system-contention scope）</th>
</tr>
</thead>
<tbody>
<tr>
<td>竞争范围</td>
<td>同一进程内的用户级线程</td>
<td>系统内的所有线程</td>
</tr>
<tr>
<td>典型实现</td>
<td>线程库调度，将用户级线程映射到轻量级进程（LWP），通常由程序员设置优先级</td>
<td>内核直接调度线程到可用CPU</td>
</tr>
<tr>
<td>对应的 <code>Pthread</code> 宏</td>
<td><code>PTHREAD_SCOPE_PROCESS</code></td>
<td><code>PTHREAD_SCOPE_SYSTEM</code> <br> （Linux、macOS 仅支持此模式）</td>
</tr>
</tbody>
</table>
<h3 id="3-2-multiple-processor-scheduling">3. 2 多处理器调度（Multiple-Processor Scheduling）<a class="headerlink" href="#3-2-multiple-processor-scheduling" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>架构类型</strong>：多核 CPU、多线程核心、非统一内存访问（NUMA）系统、异构多处理（HMP, Heterogeneous multiprocessing）</li>
<li><strong>对称多处理（SMP, Symmetric multiprocessing）</strong>是指每个处理器自主进行调度<ul>
<li>所有线程可处于一个<strong>公共就绪队列（common ready queue）</strong>中</li>
<li>每个处理器可拥有自己的<strong>私有线程（private queue）</strong>队列</li>
</ul>
</li>
</ul>
<p><img src="/sys2/images/image8-17.png" style="display: block; width: 50%; margin: 0 auto;" /></p>
<ul>
<li><strong>多核处理器（Multicore Processors）</strong>：利用内存停顿的时间，在内存读取的过程中推进另一个线程的执行，运行速度更快且功耗更低</li>
</ul>
<p><img src="/sys2/images/image8-18.png" style="display: block; width: 50%; margin: 0 auto;" /></p>
<ul>
<li><strong>多线程多核系统（Multithreaded Multicore System）</strong>：每个核心拥有不止 <span class="arithmatex">\(1\)</span> 个硬件线程，若某个线程出现内存停顿，就切换到另一个线程</li>
</ul>
<p><img src="/sys2/images/image8-19.png" style="display: block; width: 50%; margin: 0 auto;" /></p>
<ul>
<li><strong>芯片多线程（CMT, Chip-multithreading）</strong>：为每个核心分配多个硬件线程，英特尔称为<strong>超线程（hyperthreading）</strong></li>
</ul>
<p><img src="/sys2/images/image8-20.png" style="display: block; width: 40%; margin: 0 auto;" /></p>
<ul>
<li>在每个核心包含 <span class="arithmatex">\(2\)</span> 个硬件线程的四核系统（quad-core system）中，操作系统会识别出 <span class="arithmatex">\(8\)</span> 个逻辑处理器</li>
</ul>
<p><img src="/sys2/images/image8-21.png" style="display: block; width: 40%; margin: 0 auto;" /></p>
<ul>
<li><strong>两级调度</strong>：<ol>
<li>操作系统决定哪个软件线程在逻辑 CPU 上运行</li>
<li>每个核心决定哪个硬件线程在物理核心上运行</li>
</ol>
</li>
</ul>
<p><img src="/sys2/images/image8-22.png" style="display: block; width: 50%; margin: 0 auto;" /></p>
<ul>
<li><strong>负载均衡（Load balancing）</strong><ul>
<li><strong>推迁移（Push migration）</strong>：定期检查过载 CPU，将任务推送至空闲 CPU</li>
<li><strong>拉迁移（Pull migration）</strong>：空闲 CPU 主动从繁忙 CPU 拉取任务</li>
</ul>
</li>
<li>
<p><strong>处理器亲和性（Processor Affinity）</strong>：当线程在某处理器上运行时，该处理器的缓存会存储该线程的内存访问数据，这种线程与处理器之间的关联关系称为处理器亲和性</p>
<ul>
<li><strong>软亲和性（Soft affinity）</strong>：OS 尽量让线程在同一 CPU 运行，但不提供强制保证</li>
<li><strong>硬亲和性（Hard affinity）</strong>：允许进程指定其可以运行的处理器集合</li>
<li>负载均衡可能会影响处理器亲和性：为了平衡负载，线程可能被从一个处理器迁移到另一个，但这样会导致线程丢失原处理器缓存中存储的内容</li>
</ul>
</li>
<li>
<p>当操作系统具备 NUMA 感知能力时，会将内存分配到线程当前运行的 CPU 所在区域附近，以此优化内存访问效率</p>
</li>
</ul>
<p><img src="/sys2/images/image8-23.png" style="display: block; width: 50%; margin: 0 auto;" /></p>
<ul>
<li>异构多处理（HMP）的处理器在计算能力、功耗等特性上并非完全一致，可根据任务需求灵活调度</li>
</ul>
<h3 id="3-3-real-time-cpu-scheduling">3. 3 实时调度（Real-Time CPU Scheduling）<a class="headerlink" href="#3-3-real-time-cpu-scheduling" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>软实时系统（Soft real-time systems）</strong>：关键实时任务优先级最高，但无法保证任务何时被调度</li>
<li><strong>硬实时系统（Hard real-time systems）</strong>：任务必须在截止时间前完成</li>
</ul>
<h2 id="4-os">4 主流 OS 调度实现<a class="headerlink" href="#4-os" title="Permanent link">&para;</a></h2>
<h3 id="4-1-win-xp-scheduling">4. 1 Win XP Scheduling<a class="headerlink" href="#4-1-win-xp-scheduling" title="Permanent link">&para;</a></h3>
<ul>
<li>采用<strong>基于优先级、基于时间片、多队列的抢占式调度</strong></li>
<li><span class="arithmatex">\(32\)</span> 级优先级机制，<span class="arithmatex">\(1-15\)</span> 为可变类，<span class="arithmatex">\(16-31\)</span> 为实时类，数值越高优先级越高</li>
<li>线程优先级动态调整<ul>
<li>当线程的时间片耗尽时，非实时类线程优先级会被降低（CPU 密集型线程），保持系统的交互性</li>
<li>当线程唤醒时（I/O 密集型线程），其优先级会被提升</li>
<li>优先级的提升幅度取决于线程此前等待的对象</li>
</ul>
</li>
<li>Windows XP 会维护一个虚拟的<strong>空闲线程（idle thread）</strong>，优先级为 <span class="arithmatex">\(0\)</span> 或无优先级，在无其他进程运行时执行，避免 CPU 空闲场景</li>
</ul>
<h3 id="4-2-linux-scheduling">4. 2 Linux Scheduling<a class="headerlink" href="#4-2-linux-scheduling" title="Permanent link">&para;</a></h3>
<div class="admonition quote">
<p class="admonition-title">Linux 调度演进</p>
<table>
<thead>
<tr>
<th>内核版本</th>
<th>调度器类型</th>
<th>核心特点</th>
</tr>
</thead>
<tbody>
<tr>
<td>0.11（1991）</td>
<td>RR+优先级</td>
<td>数组实现，简单快速，<code>TASK_RUNNING</code> 状态即为就绪</td>
</tr>
<tr>
<td>1.2（1995）</td>
<td>RR+优先级</td>
<td>循环队列实现，优化遍历效率</td>
</tr>
<tr>
<td>2.2（1999）</td>
<td>调度类划分</td>
<td>支持实时、非抢占、非实时类，引入 <code>goodness</code> 函数计算进程优先级</td>
</tr>
<tr>
<td>2.4（2001）</td>
<td>时间片 epoch 机制</td>
<td>按 epoch 分配时间片，I/O 密集型进程获得更大时间片，<span class="arithmatex">\(O(n)\)</span> 复杂度（遍历所有就绪进程）</td>
</tr>
<tr>
<td>2.6（2003）</td>
<td><span class="arithmatex">\(O(1)\)</span> 调度器</td>
<td>双数组（活跃/过期）+ 位图索引，无需遍历，调度决策 <span class="arithmatex">\(O(1)\)</span> 时间</td>
</tr>
<tr>
<td>≥2.6.23（2007）</td>
<td>CFS（完全公平调度器）</td>
<td>基于红黑树，跟踪进程虚拟运行时间，优先调度虚拟时间最短的进程（<span class="arithmatex">\(O(log n)\)</span> 复杂度）</td>
</tr>
</tbody>
</table>
</div>
<p><img src="/sys2/images/image8-24.png" style="display: block; width: 50%; margin: 0 auto;" /></p>
<table>
<thead>
<tr>
<th>进程类型</th>
<th>优先级范围</th>
<th>计算方式</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>实时进程</strong></td>
<td><span class="arithmatex">\(0-99\)</span></td>
<td><code>MAX_RT_PRIO - 1 - rt_prio = 100 - 1 - 实时优先级</code></td>
</tr>
<tr>
<td><strong>普通进程</strong></td>
<td><span class="arithmatex">\(100-139\)</span></td>
<td><code>static_prio = nice + DEFAULT_PRIO = nice + 120</code></td>
</tr>
</tbody>
</table>
<p><img src="/sys2/images/image8-25.png" style="display: block; width: 50%; margin: 0 auto;" /></p>
<ul>
<li>数值越小，优先级越高</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../javascripts/mathjax-config.js"></script>
      
    
  </body>
</html>